# Effective Typescript

## 8장 타입스크립트로 마이그레이션하기

### 아이템 58. 모던 자바스크립트로 작성

- 타입스크립트 컴파일러는 자바스크립트 트랜스파일러로 사용할 수 있다.
- 타입스크립트는 자바스크립트의 상위집합이기 때문에, 코드를 최신 버전으로 바꾸다 보면 타입스크립트의 일부를 저절로 익힐 수 있다.

#### ECMAScript 모듈 사용하기

- ES2015부터는 import와 export를 사용하는 ECMAScript 모듈이 표준이 되었다.
- 마이그레이션 대상인 자바스크립트 코드가 단일 파일이거나 비표준 모듈 시스템을 사용 중이라면 ES 모듈로 전환하는 것이 좋다.

#### 프로토타입 대신 클래스 사용하기

- 마이그레이션하려는 코드에서 단순한 객체를 다룰 때 프로토타입을 사용하고 있었다면 클래스로 바꾸는 것이 좋다.
- 프로토타입으로 구현한 객체보다 클래스로 구현한 객체가 문법이 간결하고 직관적이다.

#### var 대신 let/const 사용하기

- 스코프, 호이스팅 문제로 let, const를 사용하는 것이 좋다.

#### for(;;) 대신 for-of 또는 배열 메서드 사용하기

- for-of 루프는 코드가 짧고 인덱스 변수를 사용하지 않기 때문에 실수를 줄일 수 있다.
- 인덱스 변수가 필요한 경우엔 forEach 메서드를 사용하면 된다.

#### 함수 표현식보다 화살표 함수 사용하기

- this 키워드는 일반적인 변수들과는 다른 스코프 규칙을 가진다.
- 화살표 함수를 사용하면 상위 스코프의 this를 유지할 수 있다.
- 인라인에서는 일반 함수보다 화살표 함수가 더 직관적이며 코드도 간결해진다.
- 컴파일러 옵션에 noImplicitThis를(또는 strict) 설정하면, 타입스크립트가 this 바인딩 관련된 오류를 표시해 주므로 설정하는 것이 좋다.

#### 단축 객체 표현과 구조 분해 할당 사용하기

```typescript
// bad
const x = 1;
const y = 2;
const z = 3;

const pt = {
  x: x,
  y: y,
  z: z,
};

// good
const x = 1,
  y = 2,
  z = 3;
const pt = { x, y, z };
```

- 화살표 함수 내에서 객체르르 반환할 때 소괄호로 감싸야 한다.

```typescript
const obj = {
  props: {
    a: 1,
    b: 2,
  },
};

// bad
const props = obj.props;
const a = props.a;
const b = props.b;

// good
const { props } = obj;
const { a, b } = props;

const point = [1, 2, 3];
const [x, y, z] = point;
const [, a, b] = point; // 첫 번째 요소 무시
```

#### 함수 매개변수 기본값 사용하기

- 자바스크립트에서 함수의 모든 매개변수는 선택적이며, 매개변수를 지정하지 않으면 undefined로 간주된다.
- 모던 자바스크립트에서 매개변수에 기본값을 직접 지정할 수 있다.

#### 저수준 프로미스나 콜백 대신 async/await 사용하기

- async와 await를 사용하면 코드가 간결해져서 버그나 실수를 방지할 수 있고, 비동기 코드에 타입 정보가 전달되어 타입 추론을 가능하게 한다.

#### 연관 배열에 객체 대신 Map과 Set 사용하기

#### 타입스크립트에 use strict 넣지 않기

- 타입스크립트에서 수행되는 안전성 검사가 엄격 모드보다 훨씬 더 엄격한 체크를 하기 때문에, 타입스크립트 코드에서 use strict는 무의미하다.
  - 실제로 타입스크립트 컴파일러가 생성하는 자바스크립트 코드에서 `use strict`가 추가 된다.

#### 요약

- 타입스크립트 개발 환경은 모던 자바스크립트도 실행할 수 있으므로 모던 자바스크립트의 최신 기능들을 적극적으로 사용해야 한다. 코드 품질을 향상시킬 수 있고, 타입스크립트의 타입 추론도 나아진다.
- 타입스크립트 개발 환경에서는 컴파일러와 언어 서비스를 통해 클래스, 구조 분해, async/await 같은 기능을 쉽게 배울 수 있다.
- `use strict`는 타입스크립트 컴파일러 수준에서 사용되므로 코드에서 제거해야 한다.
- TC39의 깃헙 저장소와 타입스크립트의 릴리스 노트를 통해 최신 기능을 확인할 수 있다.
